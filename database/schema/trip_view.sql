CREATE ALGORITHM=UNDEFINED DEFINER=`wirover`@`localhost` SQL SECURITY DEFINER VIEW `derived_trip`  AS  select `trip`.`tripid` AS `tripid`,`trip`.`guid` AS `guid`,`trip`.`userid` AS `userid`,`trip`.`deviceid` AS `deviceid`,`trip`.`model` AS `model`,`trip`.`starttime` AS `starttime`,`trip`.`endtime` AS `endtime`,`trip`.`distance` AS `distance`,`trip`.`status` AS `status`,(select min(`trip_trace`.`time`) from `trip_trace` where (`trip_trace`.`tripid` = `trip`.`tripid`)) AS `data_starttime`,(select max(`trip_trace`.`time`) from `trip_trace` where (`trip_trace`.`tripid` = `trip`.`tripid`)) AS `data_endtime`,(select `trip_trace`.`score` from `trip_trace` where (`trip_trace`.`tripid` = `trip`.`tripid`) order by `trip_trace`.`time` desc limit 1) AS `score` from `trip` where 1 ;
